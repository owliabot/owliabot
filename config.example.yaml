# OwliaBot Configuration Example
# Copy to config.yaml and fill in your values

# AI Providers (in priority order)
# Option 1: API Key from environment variable
providers:
  - id: anthropic
    model: claude-sonnet-4-5
    apiKey: ${ANTHROPIC_API_KEY}
    priority: 1
  - id: openai
    model: gpt-4o
    apiKey: ${OPENAI_API_KEY}
    priority: 2

# Option 2: OAuth authentication (uses Claude subscription)
# Run 'owliabot auth setup' first, then:
# providers:
#   - id: anthropic
#     model: claude-sonnet-4-5
#     apiKey: oauth  # placeholder, OAuth token will be used
#     priority: 1

# Option 3: OpenAI-compatible providers (Ollama, vLLM, LM Studio, LocalAI, etc.)
# providers:
#   - id: openai-compatible
#     model: llama3.2              # Model name as known by your server
#     baseUrl: http://localhost:11434/v1  # Ollama example
#     apiKey: "none"               # Most local servers don't need API key
#     priority: 1
#
# Common baseUrl examples:
#   - Ollama:    http://localhost:11434/v1
#   - vLLM:      http://localhost:8000/v1
#   - LM Studio: http://localhost:1234/v1
#   - LocalAI:   http://localhost:8080/v1
#   - text-generation-webui: http://localhost:5000/v1

# Telegram (optional)
telegram:
  token: ${TELEGRAM_BOT_TOKEN}
  # allowList:
  #   - "883499266"
  #
  # groups: # Per-group overrides by Telegram chat id, plus optional "*" default
  #   "*":
  #     enabled: true
  #     requireMention: true
  #     historyLimit: 50
  #   "-1001234567890":
  #     # In this group, respond even without @mention
  #     requireMention: false
  #     # If set, only these senders can trigger the bot (and be included in group history)
  #     allowFrom:
  #       - "883499266"
  #       - "@alice"
  #     historyLimit: 200

# Discord (optional)
discord:
  token: ${DISCORD_BOT_TOKEN}
  # memberAllowList: # Discord user IDs allowed to talk to the bot
  #   - "123456789012345678"

  # channelAllowList: # Guild channel IDs allowed ONLY when requireMentionInGuild is false
  #   - "1467915124764573736"  # #ðŸ¦‰ï½œoliwabot-core

  # requireMentionInGuild: true  # default true: allowlist bypass works ONLY when set to false

# Group chat behavior (optional)
# group:
#   activation: mention   # mention | always
#   historyLimit: 50      # rolling group message buffer used as context at mention time
#   maxConcurrent: 3      # max concurrent group requests per session key
#   # mentionPatterns:    # custom mention trigger patterns (regex strings, case-insensitive)
#   #   - "\\bowliabot\\b"

# Notifications - where to send proactive messages
notifications:
  channel: telegram:883499266

# Workspace path (default: ./workspace)
workspace: ./workspace

# Timezone used in prompts (default: UTC)
timezone: UTC

# Heartbeat (optional)
heartbeat:
  enabled: false
  cron: "0 * * * *"  # hourly

# Memory Search (optional)
# memorySearch:
#   enabled: false
#   provider: sqlite          # sqlite | naive
#   fallback: none            # sqlite | naive | none
#   store:
#     path: ~/.owliabot/memory/{agentId}.sqlite
#   extraPaths: []            # Additional dirs/files to include
#   sources:                  # What to search
#     - files                 # workspace memory files
#     # - transcripts         # session transcript history
#   indexing:
#     autoIndex: false        # Auto-build index on search
#     minIntervalMs: 300000   # Throttle between index attempts (5 min)

# Gateway HTTP (optional)
# gateway:
#   http:
#     host: 127.0.0.1
#     port: 8787
#     token: ${OWLIABOT_GATEWAY_TOKEN}
#     allowlist:
#       - "127.0.0.1"
#       - "10.0.0.0/8"
#     sqlitePath: ./workspace/gateway.db
#     idempotencyTtlMs: 600000
#     eventTtlMs: 86400000
#     rateLimit:
#       windowMs: 60000
#       max: 60

# System Capability (optional) - controls exec, web.fetch, web.search actions
# system:
#   exec:
#     commandAllowList:        # Only these commands may be executed
#       # Read commands (safe)
#       - ls
#       - cat
#       - grep
#       - find
#       - head
#       - tail
#       - wc
#       - echo
#       # Write commands (require confirmation when WriteGate is enabled)
#       - rm
#       - mkdir
#       - touch
#       - mv
#       - cp
#     envAllowList:            # Only these env vars may be passed through
#       - PATH
#       - HOME
#       - USER
#     timeoutMs: 60000         # Max execution time (default: 60s)
#     maxOutputBytes: 262144   # Max stdout/stderr size (default: 256KB)
#
#   web:
#     domainAllowList:         # If non-empty, only these domains allowed (supports *.example.com)
#       - "*.example.com"
#       - "api.github.com"
#     domainDenyList:          # Always denied domains (supports wildcards)
#       - "*.internal.corp"
#     allowPrivateNetworks: false  # Allow requests to private/loopback IPs (default: false)
#     timeoutMs: 15000         # Request timeout (default: 15s)
#     maxResponseBytes: 524288 # Max response size (default: 512KB)
#     userAgent: "OwliaBot/0.1 (+system-capability)"
#     blockOnSecret: true      # Block POST/PUT bodies containing detected secrets (default: true)
#
#   webSearch:
#     defaultProvider: duckduckgo  # brave | duckduckgo
#     brave:
#       apiKey: ${BRAVE_SEARCH_API_KEY}
#       endpoint: https://api.search.brave.com/res/v1/web/search
#     duckduckgo:
#       endpoint: https://duckduckgo.com/html/
#     timeoutMs: 15000
#     maxResults: 10

# MCP (Model Context Protocol) servers - optional
# Enable MCP servers during onboarding (owliabot onboard) or add them here manually.
# mcp:
#   autoStart: true              # Start MCP servers on gateway boot (default: true)
#   presets:                     # Named presets for common servers
#     - playwright               # Auto-expands to headless Playwright MCP server
#   servers:                     # Or define servers explicitly:
#     - name: playwright
#       command: npx
#       args: ["--yes", "@playwright/mcp@latest", "--headless"]
#       transport: stdio
#     - name: my-custom-server
#       url: http://localhost:3001/sse
#       transport: sse
#   defaults:
#     timeout: 30000
#     connectTimeout: 10000
#   securityOverrides:
#     playwright__browser_navigate:
#       level: read
#     playwright__browser_screenshot:
#       level: read

# Wallet Tools (Clawlet integration) - optional
# Enables wallet_balance and wallet_transfer tools for on-chain operations
# wallet:
#   clawlet:
#     enabled: false                          # Set to true to enable wallet tools
#     baseUrl: http://127.0.0.1:9100          # Clawlet daemon HTTP endpoint
#     token: ${CLAWLET_TOKEN}                 # Auth token from clawlet (required when enabled)
#     requestTimeout: 30000                   # Request timeout in ms (default: 30s)
#     defaultChainId: 8453                    # Default chain ID (8453 = Base, 1 = Ethereum)
